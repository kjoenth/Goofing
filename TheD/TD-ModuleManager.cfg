//changes to stock squad parts
+PART[radialEngineMini]{
	@name = radialEngineMini-K
	@title = LV-1RK Kethane Fuel Engine
	@MODULE
	{
		@PROPELLANT[LiquidFuel]{
			@name = Kethane

		}
	}
}
//-----------------------------//
+PART[adapterMk3-Mk2]{
	@name = adapterMk3-Mk2-CO2
	@description = A variation of the C7 Aerospace Division's Mk3 to Mk2 adapter, it is designed for off world ISRU storage of compressed CO2. Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
	@title = C7 Brand Adapter Slanted - 2.5m to 1.25m - Liquid CO2
	-RESOURCE[LiquidFuel]{}
	-RESOURCE[Oxidizer]{}
	RESOURCE{
		name = LqdCO2
		amount = 0
		maxAmount = 1900
	}
}

+PART[adapterMk3-Mk2]{
	@name = adapterMk3-Mk2-Water
	@description = A variation of the C7 Aerospace Division's Mk3 to Mk2 adapter, it is designed for off world ISRU storage of water. Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
	@title = C7 Brand Adapter Slanted - water
	-RESOURCE[LiquidFuel]{}
	-RESOURCE[Oxidizer]{}
	RESOURCE{
		name = Water
		amount = 0
		maxAmount = 1900
	}
}
+PART[adapterMk3-Mk2]{
	@name = adapterMk3-Mk2-Kethane
	@description = A variation of the C7 Aerospace Division's Mk3 to Mk2 adapter, it is designed for off world ISRU storage of Kethane. Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
	@title = C7 Brand Adapter Slanted - Kethane
	-RESOURCE[LiquidFuel]{}
	-RESOURCE[Oxidizer]{}
	RESOURCE{
		name = Kethane
		amount = 0
		maxAmount = 1900
	}
}
+PART[adapterMk3-Mk2]{
	@name = adapterMk3-Mk2-oxidizer
	@description = A variation of the C7 Aerospace Division's Mk3 to Mk2 adapter, it is designed for off world ISRU storage of compressed oxygen (oxidizer). Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
	@title = C7 Brand Adapter Slanted - Oxidizer
	-RESOURCE[LiquidFuel]{}
	-RESOURCE[Oxidizer]{}
	RESOURCE{
		name = Oxidizer
		amount = 0
		maxAmount = 1900
	}
}
//-----------------------------//

//-----------------------------//
//+PART[adapterMk3-Size2Slant]{
//	@name = adapterMk3-Size2Slant-CO2
//	@description = A variation of the C7 Aerospace Division's Mk3 to 2.5m adapter, it is designed for off world ISRU storage of compressed CO2. Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
//	@title = C7 Brand Adapter Slanted - 2.5m to 1.25m - Liquid CO2
//	-RESOURCE[LiquidFuel]{}
//	-RESOURCE[Oxidizer]{}
//	RESOURCE{
//		name = LqdCO2
//		amount = 0
//		maxAmount = 2000
//	}
//}

//+PART[adapterMk3-Size2Slant]{
//	@name = adapterMk3-Size2Slant-Water
//	@description = A variation of the C7 Aerospace Division's Mk3 to 2.5m adapter, it is designed for off world ISRU storage of water. Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
//	@title = C7 Brand Adapter Slanted - water
//	-RESOURCE[LiquidFuel]{}
//	-RESOURCE[Oxidizer]{}
//	RESOURCE{
//		name = Water
//		amount = 0
//		maxAmount = 2000
//	}
//}
//+PART[adapterMk3-Size2Slant]{
//	@name = adapterMk3-Size2Slant-Kethane
//	@description = A variation of the C7 Aerospace Division's Mk3 to 2.5m adapter, it is designed for off world ISRU storage of Kethane. Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
//	@title = C7 Brand Adapter Slanted - Kethane
//	-RESOURCE[LiquidFuel]{}
//	-RESOURCE[Oxidizer]{}
//	RESOURCE{
//		name = Kethane
//		amount = 0
//		maxAmount = 2000
//	}
//}
//+PART[adapterMk3-Size2Slant]{
//	@name = adapterMk3-Size2Slant-oxidizer
//	@description = A variation of the C7 Aerospace Division's Mk3 to 2.5m adapter, it is designed for off world ISRU storage of compressed oxygen (oxidizer). Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
//	@title = C7 Brand Adapter Slanted - Oxidizer
//	-RESOURCE[LiquidFuel]{}
//	-RESOURCE[Oxidizer]{}
//	RESOURCE{
//		name = Oxidizer
//		amount = 0
//		maxAmount = 2000
//	}
//}
//-----------------------------//


+PART[stackBiCoupler]{
	@name=stackBiCoupler2
	@rescaleFactor = 1.5
	@title = TVR-300 Stack Bi-Coupler
	@description = The designer claims there is a joke in the name, but we don't get it.
	@attachRules = 1,1,1,0,0
}

+PART[ServiceBay_250]{
	@name=ServiceBay_350
	@rescaleFactor=1.5
	@title = Service Bay (3.5m)
}

+PART[radialLiquidEngine1-2]{
	@name=radialLiquidEngine1-2-KH4Ox
	@title=Mk-55k "Khud" Kethane Engine
	@description=It took some doing, but after a weekend of tinkering, the Mk-55k engine was running as efficiently with Kethane as it's sibling does with Liquid Fuel.
	@MODULE
	{
		@PROPELLANT[LiquidFuel]{
			@name = Kethane

		}
	}
}

+PART[mk3FuselageMONO]{
	@name=mk3FuselageKH4Ox
	@title=Mk3 Kethane Tank
	@description=Yup. More Kethane.
	-RESOURCE[MonoPropellant]{}
	RESOURCE{
		name = Kethane
		amount = 0
		maxAmount = 450
	}
	RESOURCE{
		name = Oxidizer
		amount = 0
		maxAmount = 550
	}
}

//@PART[adapterLargeSmallBi]{
//	@attachRules=1,0,1,1,0
//}
//@PART[adapterLargeSmallTri]{
//	@attachRules=1,0,1,1,0
//}
//@PART[adapterLargeSmallQuad]{
//	@attachRules=1,0,1,1,0
//}

+PART[adapterMk3-Size2]{
	@name=adapterMk3-Size2-KH4O
	@title = Mk3 to 2.5m Kethane Adapter
	@description=With all the destruction and curves you grew to love, but now with more Kethane.
	-RESOURCE[LiquidFuel]{}
	RESOURCE{
		name = Kethane
		amount = 0
		maxAmount = 1125
	}
}

//+PART[mk2FuselageShortLFO]{
//	@name=mk2FuselageShortKH4O
//	@description=The same fuselage you liked before, but now with Kethane instead of Liquid Fuel.
//	-RESOURCE[LiquidFuel]{}
//	RESOURCE{
//		name = Kethane
//		amount = 0
//		maxAmount = 180
//	}
//}

//+PART[stackTriCoupler]{
//	@name=stackTriCoupler-mk3
//	@node_stack_top = 0.0, 0.5349199, 0.0, 0.0, 1.0, 0.0, 2
//	@node_stack_bottom01 = 0, -0.4361493, -0.7233048, 0.0, -1.0, 0.0, 2
//	@node_stack_bottom02 = -0.6264005, -0.4361493, 0.3616524, 0.0, -1.0, 0.0, 2
//	@node_stack_bottom03 = 0.6264006, -0.4361493, 0.3616522, 0.0, -1.0, 0.0, 2
//	@title=TVR-1180CCC Mk3 Stack Tri-Coupler
//	@description=Embiggened tricoupler. I'm sure there is a joke here about tripple C something something.
//	@rescaleFactor = 2.0
//}

////allows docking clamps to be mounted to radial edges to larger docking ports
@PART[dockingPortLarge]{
	@attachRules = 1,0,1,1,0
}

+PART[adapterSize2-Mk2]{
	@name=adapterSize2-Mk2-Kethane
	@description=You still don't need to decide between a rocket and a spaceplane, but now you get to decide whether it hold kethane.
	@title = 2.5m to Mk2 Adapter-Kethane
	-RESOURCE[LiquidFuel]{}
	RESOURCE{
		name = Kethane
		amount = 0
		maxAmount = 360
	}
}
+PART[fuelTank4-2]{
	@name=fuelTank4-2-Kethane
	@title = Rockomax X200-8K Fuel Tank
	@description = A compact fuel tank, designed for small upper stages and landers. Rockomax takes no responsibility for the Dawton Kerman Aboveground Pool Company stickers on the inside because it totally is not a swimming pool frame we stole from their back lot. Now designed to hold kethane. Definitely not water.
	-RESOURCE[LiquidFuel]{}
	RESOURCE{
		name = Kethane
		amount = 0
		maxAmount = 360
	}
}
+PART[adapterSize2-Size1Slant]{
	@name = adapterSize2-Size1Slant-CO2
	@description = A variation of the C7 Aerospace Division's 2.5m to 1.25m adapter, it is designed for off world ISRU storage of compressed CO2. Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
	@title = C7 Brand Adapter Slanted - 2.5m to 1.25m - Liquid CO2
	-RESOURCE[LiquidFuel]{}
	-RESOURCE[Oxidizer]{}
	RESOURCE{
		name = LqdCO2
		amount = 0
		maxAmount = 800
	}
}

+PART[adapterSize2-Size1Slant]{
	@name = adapterSize2-Size1Slant-Water
	@description = A variation of the C7 Aerospace Division's 2.5m to 1.25m adapter, it is designed for off world ISRU storage of water. Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
	@title = C7 Brand Adapter Slanted - water
	-RESOURCE[LiquidFuel]{}
	-RESOURCE[Oxidizer]{}
	RESOURCE{
		name = Water
		amount = 0
		maxAmount = 800
	}
}
+PART[adapterSize2-Size1Slant]{
	@name = adapterSize2-Size1Slant-Kethane
	@description = A variation of the C7 Aerospace Division's 2.5m to 1.25m adapter, it is designed for off world ISRU storage of Kethane. Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
	@title = C7 Brand Adapter Slanted - Kethane
	-RESOURCE[LiquidFuel]{}
	-RESOURCE[Oxidizer]{}
	RESOURCE{
		name = Kethane
		amount = 0
		maxAmount = 800
	}
}
+PART[adapterSize2-Size1Slant]{
	@name = adapterSize2-Size1Slant-oxidizer
	@description = A variation of the C7 Aerospace Division's 2.5m to 1.25m adapter, it is designed for off world ISRU storage of compressed oxygen (oxidizer). Be aware that, due to differences in densities, different tanks filled with different materials, will have very different masses.
	@title = C7 Brand Adapter Slanted - Oxidizer
	-RESOURCE[LiquidFuel]{}
	-RESOURCE[Oxidizer]{}
	RESOURCE{
		name = Oxidizer
		amount = 0
		maxAmount = 800
	}
}
+PART[liquidEngine3]{
	@name=kethaneEngine3
	@manufacturer=Organization of Kethane Equipment Producers
	@title=KM-909 Kethane Engine
	@description=As resources became scarce, it was necessary to consider new ways of doing things. In the end, it was easier to turn to older technology and adapt it. This LV-909 inspired engine runs on Kethan and Oxidizer, and is perfect for ISRU craft.
	@MODULE
	{
		@PROPELLANT[LiquidFuel]{
			@name = Kethane

		}
	}
}
@PART[ISRU]{
	@description = This mobile processing plant can take raw materials and combine them into useful fuel products.  When operated by a skilled engineer, you will be able to operate with better efficiency.
	-MODULE[ModuleResourceConverter]{}
	-MODULE[ModuleResourceConverter]{}
	-MODULE[ModuleResourceConverter]{}
	-MODULE[ModuleResourceConverter]{}
	MODULE{
		name = ModuleResourceConverter
		tag = Sabatierrxn//for moduleManager
		ConverterName = Sabatier rxn
		StartActionName = Start Sabatier rxn
		StopActionName = Stop Sabatier rxn
		AutoShutdown = false
		FillAmount = 1.0
		AlwaysActive = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Engineer
		EfficiencyBonus = 1
		INPUT_RESOURCE{
		   ResourceName = CarbonDioxide
		   Ratio = 0.763636363636364
		   FlowMode = STAGE_PRIORITY_FLOW
		}
		INPUT_RESOURCE{
		   ResourceName = Hydrogen
		   Ratio = 3.05454545454545
		   FlowMode = STAGE_PRIORITY_FLOW
		}
		INPUT_RESOURCE{
		   ResourceName = ElectricCharge
		   Ratio = 30
		}
		OUTPUT_RESOURCE{
		   ResourceName = KethaneGas
		   Ratio = 0.16969696969697
		   FlowMode = STAGE_PRIORITY_FLOW
		   DumpExcess = false
		}
		OUTPUT_RESOURCE{
		   ResourceName = Water
		   Ratio = 0.00122836363636364
		   FlowMode = STAGE_PRIORITY_FLOW
		   DumpExcess = false
		}
	}
	MODULE{
		name = ModuleResourceConverter
		tag = Electrolysisrxn//for moduleManager
		ConverterName = Water Electrolysis
		StartActionName = Start Electrolysis rxn
		StopActionName = Stop Electrolysis rxn
		AutoShutdown = false
		FillAmount = 1.0
		AlwaysActive = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Engineer
		EfficiencyBonus = 1
		INPUT_RESOURCE{
		   ResourceName = Water
		   Ratio = 0.00122836363636364
		   FlowMode = STAGE_PRIORITY_FLOW
		}
		INPUT_RESOURCE{
		   ResourceName = ElectricCharge
		   Ratio = 5
		}
		OUTPUT_RESOURCE{
		   ResourceName = Hydrogen
		   Ratio = 1.52727272727273
		   FlowMode = STAGE_PRIORITY_FLOW
		   DumpExcess = false
		}
		OUTPUT_RESOURCE{
		   ResourceName = Oxygen
		   Ratio = 0.763636363636364
		   FlowMode = STAGE_PRIORITY_FLOW
		   DumpExcess = false
		}
	}
}

@PART[sensorAtmosphere]{
	@fuelCrossFeed = False
	MODULE
    {
      name = ModuleResourceHarvester
      HarvesterType = 2
      Efficiency = 1
      ResourceName = Nitrogen
      ConverterName = Nitrogen Filter
      StartActionName = Open Nitrogen Filter
      StopActionName = Close Nitrogen Filter
      INPUT_RESOURCE
      {
        ResourceName = ElectricCharge
        Ratio = 0.2317
      }
    }
    MODULE
    {
      name = ModuleResourceHarvester
      HarvesterType = 2
      Efficiency = 1
      ResourceName = Oxygen
      ConverterName = Oxygen Filter
      StartActionName = Open Oxygen Filter
      StopActionName = Close Oxygen Filter
      INPUT_RESOURCE
      {
        ResourceName = ElectricCharge
        Ratio = 0.2414
      }
    }
    MODULE
    {
      name = ModuleResourceHarvester
      HarvesterType = 2
      Efficiency = 1
      ResourceName = CarbonDioxide
      ConverterName = CO2 Filter
      StartActionName = Open CO2 Filter
      StopActionName = Close CO2 Filter
      INPUT_RESOURCE
      {
        ResourceName = ElectricCharge
        Ratio = 0.632
      }
    }
    MODULE
    {
      name = ModuleResourceHarvester
      HarvesterType = 2
      Efficiency = 1
      ResourceName = ArgonGas
      ConverterName = Argon Filter
      StartActionName = Open Argon Filter
      StopActionName = Close Argon Filter
      INPUT_RESOURCE
      {
        ResourceName = ElectricCharge
        Ratio = .2090
      }
    }
    MODULE
    {
      name = ModuleResourceHarvester
      HarvesterType = 2
      Efficiency = 1
      ResourceName = KethaneGas
      ConverterName = Kethane Filter
      StartActionName = Open Kethane Filter
      StopActionName = Close Kethane Filter
      INPUT_RESOURCE
      {
        ResourceName = ElectricCharge
        Ratio = .2014
      }
    }
    MODULE
    {
      name = ModuleResourceHarvester
      HarvesterType = 2
      Efficiency = 1
      ResourceName = Water
      ConverterName = Water Filter
      StartActionName = Open Water Filter
      StopActionName = Close Water Filter
      INPUT_RESOURCE
      {
        ResourceName = ElectricCharge
        Ratio = 0.1
      }
    }
}

//@PART[mk3CargoBayS]{
//	@attachRules = 1,1,1,1,1
//}
//@PART[mk3CargoBayM]{
//	@attachRules = 1,1,1,1,1
//}
//@PART[mk3CargoBayL]{
//	@attachRules = 1,1,1,1,1
//}

+PART[largeAdapter2]{
	@name=largeAdapter3
	@rescaleFactor = 1.5
	@title = Rockomax Brand Adapter 03
	@description = With great big huge tanks come great big huge adapters.
}


//changes to classic parts
@PART[CircularIntake1]{
-MODULE[ModuleResourceIntake]{}
-RESOURCE[IntakeAir]{}
	@description = Basically just a big fan for forcing atmospheric gasses through all sorts of other devices.
	@MODULE
	{
		name = ModuleResourceIntake
		resourceName = IntakeAtm
		checkForOxygen = False
		area = 0.0085
		intakeSpeed = 10
		intakeTransformName = AirIntake
	}
}

//changes to Truss Pack

+PART[HexTrussLongHollowWide]{
	@name=HexTrussLongHollowWide3
	@rescaleFactor = 1.5
	@title = Long Hex Truss - Hollow - Wider
	@description = A long hollow hexagonal truss perfect for stations and interplanetary missions. Now even larger!
}

//------------------Changes to NearFuturePropulsion
+PART[argon-25-3]{
	@name = argon-25-4
	@rescaleFactor = 1.5
	@title = ARG-250K Argon Tank
	@RESOURCE[ArgonGas]{
		//these volumes are probably very wrong.
		@amount = 2348000
		@maxAmount = 2348000
	}
}

//Order matters
//replace the defaults to change tanks
//and then put argonGas on the engines
RESOURCE_DEFINITION{
	name = LqdArgon
    //density = 0.0013954 //Real-world
    density = 0.0062793 //kerbal value
	flowMode = ALL_VESSEL
	transfer = PUMP
	unitCost = 0.16
  	hsp = 120
	isTweakable = true
	//ksparpicon = 
}
@PART[*]:HAS[@MODULE[ModuleEnginesFX]:HAS[@PROPELLANT[ArgonGas]]]
{
	@MODULE[ModuleEnginesFX]{
		@PROPELLANT[ArgonGas]{
			@name = LqdArgon
			//@ratio *= 0.0178 
		}
	}
	@MODULE[ModuleEnginesFX]{
		@PROPELLANT[ElectricCharge]{
			@ratio /= 0.000283471
		}
	}
}
@PART[*]:HAS[@RESOURCE[ArgonGas]]
{
	@RESOURCE[ArgonGas]{
		@name=LqdArgon
		@amount *=0.0178
		@maxAmount *=0.0178
	}
}
@PART[*]:HAS[@MODULE[VariableISPEngine]:HAS[@Mode1Propellant[ArgonGas]]]
{
  @Mode1Propellant = LqdArgon
}
@PART[*]:HAS[@MODULE[VariableISPEngine]:HAS[@Mode2Propellant[ArgonGas]]]
{
  @Mode2Propellant = LqdArgon
}

+PART[HexTrussAdapterLarge]{
	@name=HexTrussAdapterLarger
	@description=A slightly larger adapter.
	@rescaleFactor = 1.5
}




